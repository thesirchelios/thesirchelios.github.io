<!doctype html>
<html>
<head>
	<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">


<!--[if lte IE 8]>
  
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-old-ie-min.css">
  
<![endif]-->
<!--[if gt IE 8]><!-->
  
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
  
<!--<![endif]-->



<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">



  
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="css/layouts/marketing-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="css/layouts/marketing.css">
    <!--<![endif]-->
  


    
<!--[if lt IE 9]>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
<![endif]-->

<script>

//Check if server is online. Default false, if the ajax function is successful we set true
var server = false;
var fooname = "";
var ip1 = "http://213.114.121.214:11775";
var ip2 = "http://188.222.232.96:11775";

$.ajax({
	url: ip2,
	async: false,
	dataType: 'json',
	success: function (data) {
        server = true;
        fooname = data.name;
	}
});

//} 

//setTimeout(refresh, 2000);


//Parse json data from server url
//setInterval(function() {
$.getJSON(ip2, function(person){

    //Loop to return all the keys and their values from the json file
    $.each(person, function(key, value){

    	//if (key == 'name' || key == 'hostPlayer') {
    	//$('div#value2').append(value + " <br />");
    	//$('div#key').append(key + ": <br />");
        //document.write(key+": "+value+"<br />"); 
        //alert(person[value].players);
        //}
       

    });

    $('a#serverName').append(person.name);
    $('div#name').append(person.name);
    $('div#hostPlayer').append(person.hostPlayer);
    if (person.sprintEnabled == '1') {
    $('div#sprint').append('Yes');
		} else {
			$('div#sprint').append('No');
		}

	if (person.VoIP = true) {
    $('div#voip').append('On');
		} else {
			$('div#voip').append('Off');
		}
    $('div#map').append(person.map);
    $('div#variant').append(person.variant);
    $('div#status').append(person.status);
    $('a#numPlayers').append(person.numPlayers);
    $('a#maxPlayers').append(person.maxPlayers);

    //Two loops to retrieve the player data which is stored in the "second level" of the json file
    $.each(person.players, function(i, object) {
    	
    	$.each(object, function(property, value) {
    		if (property == 'name' ) {
    		//$('ul#1').append("<li>" + property + "=" + value + "</li>");
    		$('div#value').append(value + " <br />");
    			} else if (property == 'score') {
    				$('div#value2').append(value + " <br />");

    			} else if (property == 'kills') {
    				$('div#value3').append(value + " <br />");
    			}
    		
    		});
    });

}); 

//}, 2000)


//Simple check if the server is online or offline using the ajax function from earlier

document.write(server);

</script>
</head>
<body>
<div class="header">
    <div class="home-menu pure-menu pure-menu-horizontal pure-menu-fixed">
        <a class="pure-menu-heading" href="">thesirchelios</a>

        <ul class="pure-menu-list">
            <li class="pure-menu-item"><a href="https://discord.gg/0m22b4g8A82eqf9u" class="pure-menu-link"><img class="pure-img-responsive" alt="File Icons" width="30" src="img/discord.png"></a></li>
            <li class="pure-menu-item"><a href="#" class="pure-menu-link"><img class="pure-img-responsive" alt="File Icons" width="30" src="img/steam.png"></a></li>
            <li class="pure-menu-item"><a href="https://twitter.com/thesirchelios" class="twitter-follow-button" data-show-count="false">Follow @thesirchelios</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></li>
        </ul>
    </div>
</div>	


<div id="offline">
</div>

<div class="splash-container" id="splash">
	<div id="offline">
</div>
	<div class="splash">
		<h1 class="splash-head">Server Name: <a id="serverName"></a></h1>
		<div id="online"></div>
		<form class="pure-form">
			<p class="pasteText">Paste the text below in the console (F1 or ` to open)</p>
		    <textarea rows="1" cols="40" onClick="this.select();">server.connect 90.140.100.241:11775</textarea>
		</form>
	</div>
</div>
<script type="text/javascript">
if (server == true) {
	document.write("online");
} else {
	document.write("offline");
	document.getElementById("offline").innerHTML = "TEST";
}

</script>

<div class="content-wrapper">

	<div class="content-head ch1">
		<h1>Server information</h1>
		<div class="pure-g" id="topTable">
			<div class="pure-u-3-24"> Server Name</div>
			<div class="pure-u-3-24"> Host</div>
			<div class="pure-u-3-24"> Sprint</div>
			<div class="pure-u-3-24"> VoIP</div>
			<div class="pure-u-3-24"> Map</div>
			<div class="pure-u-3-24"> Gametype</div>
			<div class="pure-u-3-24"> Status</div>
			<div class="pure-u-3-24"> Players</div>
		</div>
		<div class="pure-g">
			<div class="pure-u-3-24" id="name"> </div>
			<div class="pure-u-3-24" id="hostPlayer"> </div>
			<div class="pure-u-3-24" id="sprint"> </div>
			<div class="pure-u-3-24" id="voip"> </div>
			<div class="pure-u-3-24" id="map"> </div>
			<div class="pure-u-3-24" id="variant"> </div>
			<div class="pure-u-3-24" id="status"> </div>
			<div class="pure-u-3-24"><a id="numPlayers"></a> / <a id="maxPlayers"></a> </div>
		</div>
	</div>

	<div class="content-head">
		<div class="pure-g" id="topTable">
			<div class="pure-u-1-3">Player</div>
			<div class="pure-u-1-3">Score</div>
			<div class="pure-u-1-3">Kills</div>
		</div>
		<div class="pure-g">
			<div class="pure-u-1-3" id="value"></div>
			<div class="pure-u-1-3" id="value2"></div>
			<div class="pure-u-1-3" id="value3"></div>
		</div>
	</div>

	

<!--<div id="key"></div>
<div id="value"></div> -->
<div class="footer l-box is-center">
Framework by <a href="http://purecss.io">purecss.io</a>. Server run in Halo Online mod <a href="http://halo.cafe">Eldewrito</a>. Halo is a trademark of Microsoft. This site has no affiliation.
</div>
</div>

</body>
</html>